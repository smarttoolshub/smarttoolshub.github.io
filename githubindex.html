<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generador Avanzado IG - IA</title>
<style>
body{font-family:Arial,sans-serif;background:#f2f2f2;margin:0;padding:0;}
header{background:#ff9800;color:white;padding:10px;text-align:center;}
.container{padding:20px;max-width:900px;margin:auto;}
button{padding:10px 15px;margin:5px;background:#0d1b2a;color:white;border:none;border-radius:5px;cursor:pointer;}
button:hover{background:#29384f;}
input,textarea{width:100%;margin-top:10px;padding:10px;border-radius:5px;border:1px solid #ccc;}
canvas{border:1px solid #ccc;margin-top:10px;}
.calendar{margin-top:20px;}
.post-item{background:white;padding:10px;margin:10px 0;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.2);}
video{width:100%;margin-top:10px;border-radius:8px;}
</style>
</head>
<body>
<header>
<h2>Generador Avanzado Instagram IA</h2>
</header>

<div class="container">
<label>Producto o tema:</label>
<input type="text" id="producto" placeholder="Ej: Auriculares Bluetooth">

<label>Link del producto:</label>
<input type="text" id="linkProducto" placeholder="Ej: https://tienda.com/producto123">

<label>Cantidad de publicaciones:</label>
<input type="number" id="cantidadPosts" value="1" min="1" max="5">

<button onclick="generarPost()">Generar Post</button>

<h3>Vista previa de la imagen:</h3>
<canvas id="canvas" width="400" height="400"></canvas>

<h3>Descripci√≥n generada:</h3>
<textarea id="descripcion" readonly></textarea>

<h3>Video corto simulado:</h3>
<video id="videoPreview" controls></video>

<h3>Calendario de publicaciones:</h3>
<div class="calendar" id="calendar"></div>
</div>

<script>
// Variables
let calendarioPosts = [];
const hashtagsGenerales = ["#Oferta","#Tendencia","#TopProducto","#Recomendado","#Afiliados","#Marketing"];

// Generar descripci√≥n
function generarDescripcion(producto, link){
    const frases = [
        `¬°Descubre ${producto} y transforma tu d√≠a! üöÄ Aprovecha esta oportunidad: ${link}`,
        `No esperes m√°s, ${producto} es tu pr√≥ximo imprescindible! ‚ú® Compra ahora: ${link}`,
        `${producto} lleg√≥ para hacer tu vida m√°s f√°cil! üî• Haz clic y descubre: ${link}`,
        `¬°Eleva tu experiencia con ${producto}! üòé Entra aqu√≠: ${link}`
    ];
    const frase = frases[Math.floor(Math.random()*frases.length)];
    const hashtags = shuffleArray(hashtagsGenerales).slice(0,3).join(" ");
    return `${frase} ${hashtags}`;
}
function shuffleArray(array){let a=array.slice();for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}

// Generar imagen
function generarImagen(producto){
    const canvas=document.getElementById('canvas');
    const ctx=canvas.getContext('2d');
    ctx.fillStyle=`hsl(${Math.random()*360},50%,70%)`;
    ctx.fillRect(0,0,canvas.width,canvas.height);
    let emoji="üì¶";
    if(producto.toLowerCase().includes("auriculares")) emoji="üéß";
    else if(producto.toLowerCase().includes("reloj")) emoji="‚åö";
    else if(producto.toLowerCase().includes("zapatos")) emoji="üëü";
    else if(producto.toLowerCase().includes("c√°mara")) emoji="üì∑";
    ctx.font="bold 80px Arial"; ctx.textAlign="center";
    ctx.fillText(emoji, canvas.width/2, canvas.height/2);
    ctx.fillStyle="#0d1b2a"; ctx.font="bold 28px Arial";
    ctx.fillText(producto, canvas.width/2, canvas.height-50);
}

// Generar video corto simulado
function generarVideo(){
    const canvas=document.getElementById('canvas');
    const video=document.getElementById('videoPreview');
    const stream=canvas.captureStream(1);
    const recorder=new MediaRecorder(stream);
    const chunks=[];
    recorder.ondataavailable=e=>chunks.push(e.data);
    recorder.onstop=()=>{
        const blob=new Blob(chunks,{type:'video/webm'});
        video.src=URL.createObjectURL(blob);
    };
    recorder.start();
    let frames=0;
    const interval=setInterval(()=>{
        frames++;
        if(frames>5){recorder.stop(); clearInterval(interval);}
        const ctx=canvas.getContext('2d');
        ctx.fillStyle=`hsl(${Math.random()*360},50%,70%)`;
        ctx.fillRect(0,0,canvas.width,canvas.height);
    },500);
}

// Calendario
function agregarAlCalendario(producto, descripcion, cantidad){
    const horarios=[9,12,16,19,21];
    for(let i=0;i<cantidad;i++){
        if(calendarioPosts.filter(p=>new Date(p.hora).toDateString()===new Date().toDateString()).length>=5){
            alert("L√≠mite diario de publicaciones alcanzado");
            break;
        }
        const hora=new Date();
        hora.setHours(horarios[(calendarioPosts.length)%horarios.length],0,0);
        const post={producto,descripcion,hora:hora.toLocaleString()};
        calendarioPosts.push(post);
    }
    mostrarCalendario();
}
function mostrarCalendario(){
    const div=document.getElementById('calendar');
    div.innerHTML='';
    calendarioPosts.forEach(p=>{
        const item=document.createElement('div');
        item.className="post-item";
        item.innerHTML=`<b>${p.producto}</b><br>${p.descripcion}<br><i>Programado: ${p.hora}</i>`;
        div.appendChild(item);
    });
}

// Generar post completo
function generarPost(){
    const producto=document.getElementById('producto').value.trim();
    const link=document.getElementById('linkProducto').value.trim()||"[link]";
    const cantidad=parseInt(document.getElementById('cantidadPosts').value)||1;
    if(!producto){alert("Ingresa un producto"); return;}
    const descripcion=generarDescripcion(producto,link);
    document.getElementById('descripcion').value=descripcion;
    generarImagen(producto);
    generarVideo();
    agregarAlCalendario(producto,descripcion,cantidad);
}
</script>
</body>
</html>